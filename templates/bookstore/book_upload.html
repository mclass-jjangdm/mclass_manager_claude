{% extends "bookstore/base_bookstore.html" %}

{% block bookstore_content %}
<div class="max-w-4xl mx-auto">
    <div class="border-b-2 border-indigo-600 pb-3 mb-6">
        <h2 class="text-2xl font-bold text-gray-800">도서 일괄 등록</h2>
        <p class="text-gray-600 mt-1">엑셀(.xlsx) 또는 CSV 파일을 업로드하여 여러 도서를 한 번에 등록합니다.</p>
    </div>

    <!-- 엑셀 파일 작성 규칙 안내 -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8">
        <h4 class="text-lg font-semibold text-blue-800 mb-4">⚠️ 엑셀 파일 작성 규칙</h4>
        <ul class="space-y-3 text-gray-700">
            <li>첫 번째 줄(헤더)에 다음 컬럼명이 <strong>정확히</strong> 포함되어야 합니다:</li>
            <li class="bg-white p-4 rounded border border-blue-100 font-mono text-red-600 font-semibold">
                ISBN, 교재명, 저자, 출판사, 정상가격, 입고가격, 판매가격, 재고
            </li>
            <li>이미 등록된 <strong>ISBN(바코드)</strong>이 있는 경우, 해당 도서는 <strong>자동으로 건너뜁니다(Skip)</strong>.</li>
            <li>가격 및 재고 칸에 숫자가 아닌 문자가 있으면 0으로 처리됩니다.</li>
        </ul>
    </div>

    <!-- 업로드 폼 -->
    <div class="content-card">
        <form method="POST" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            <div>
                <label for="file_input" class="form-label">파일 선택:</label>
                <input type="file"
                       name="upload_file"
                       id="file_input"
                       accept=".csv, .xlsx, .xls"
                       required
                       class="form-input w-full">
            </div>

            <div class="flex gap-3 justify-center pt-4">
                <button type="submit"
                        class="bg-green-600 hover:bg-green-700 text-white px-10 py-3 rounded-lg font-medium text-base transition-colors">
                    일괄 등록 시작
                </button>
                <a href="{% url 'bookstore:book_list' %}"
                   class="bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg font-medium text-base transition-colors">
                    취소
                </a>
            </div>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 파일 입력 필드 스타일 조정
        const fileInput = document.getElementById('file_input');
        if (fileInput) {
            fileInput.classList.add('form-input');
        }
    });
</script>
{% endblock %}
